'use strict';Object.defineProperty(exports, "__esModule", { value: true });exports.MatchInfoCard = undefined;var _jsxFileName = '/home/isael/Desktop/lol-improver/lol-improver-client/src/components/MatchInfoCard/matchInfoCard.js';var _react = require('react');var _react2 = _interopRequireDefault(_react);
var _playerInfo = require('../../actions/playerInfo');
var _reactRedux = require('react-redux');
require('./index.css');function _interopRequireDefault(obj) {return obj && obj.__esModule ? obj : { default: obj };}

class MatchInfoCard extends _react2.default.Component {
    killDeathRatio(kills, assists, deaths) {
        let kda = (kills + assists) / deaths;
        return Math.round(kda * 100) / 100;
    }

    dateString(epochTime) {
        let time = new Date(epochTime);
        let month = time.getMonth() + 1;
        let day = time.getDate();
        let year = time.getFullYear();

        return `${month}/${day}/${year}`;
    }

    render() {
        // console.log(this.props);
        let time = this.dateString(this.props.gameCreation);
        let kills = this.props.matchDetails[0].mainPlayerStats[0].stats.kills;
        let deaths = this.props.matchDetails[0].mainPlayerStats[0].stats.deaths;
        let assists = this.props.matchDetails[0].mainPlayerStats[0].stats.assists;
        let kda = this.killDeathRatio(kills, assists, deaths);
        let level = this.props.matchDetails[0].mainPlayerStats[0].stats.champLevel;
        let minions = this.props.matchDetails[0].mainPlayerStats[0].stats.totalMinionsKilled;
        let neutralMinions = this.props.matchDetails[0].mainPlayerStats[0].stats.neutralMinionsKilled;
        let matchOutcome = this.props.matchDetails[0].mainPlayerStats[0].stats.win ? 'Victory' : 'Defeat';
        let championId = this.props.matchDetails[0].mainPlayerStats[0].championId;
        let playerChampArr;

        if (this.props.champions.length === 0) {
            this.props.dispatch((0, _playerInfo.fetchNameDetails)(championId));
        }

        if (this.props.champions.length === 3) {
            playerChampArr = this.props.champions.filter(champ => champ[0].champId === championId.toString());
        }

        let playerChampSrc = playerChampArr ?
        `http://ddragon.leagueoflegends.com/cdn/8.11.1/img/champion/${playerChampArr[0][0].key}.png` :
        '';

        let playerChampName = playerChampArr ? playerChampArr[0][0].name : '';

        let matchOutcomeCss = matchOutcome === 'Victory' ? 'win' : 'defeat';

        //clean code up and make the input run the dispatch than clean the server side dawg..
        return (
            _react2.default.createElement('div', { className: `match-card ${matchOutcomeCss}`, __source: { fileName: _jsxFileName, lineNumber: 53 }, __self: this },
                _react2.default.createElement('div', { className: 'player-champ', __source: { fileName: _jsxFileName, lineNumber: 54 }, __self: this },
                    _react2.default.createElement('h2', { __source: { fileName: _jsxFileName, lineNumber: 55 }, __self: this }, playerChampName),
                    _react2.default.createElement('div', { className: 'player-image', __source: { fileName: _jsxFileName, lineNumber: 56 }, __self: this },
                        _react2.default.createElement('img', { src: playerChampSrc, alt: playerChampName, __source: { fileName: _jsxFileName, lineNumber: 57 }, __self: this }))),


                _react2.default.createElement('div', { className: 'kill-stats', __source: { fileName: _jsxFileName, lineNumber: 60 }, __self: this },
                    _react2.default.createElement('p', { __source: { fileName: _jsxFileName, lineNumber: 61 }, __self: this }, kills, '/', deaths, '/', assists),
                    _react2.default.createElement('p', { __source: { fileName: _jsxFileName, lineNumber: 62 }, __self: this }, kda, ':1 KDA'),
                    _react2.default.createElement('p', { __source: { fileName: _jsxFileName, lineNumber: 63 }, __self: this }, time)),

                _react2.default.createElement('div', { className: 'stats', __source: { fileName: _jsxFileName, lineNumber: 65 }, __self: this },
                    _react2.default.createElement('p', { __source: { fileName: _jsxFileName, lineNumber: 66 }, __self: this }, 'level ', level),
                    _react2.default.createElement('p', { __source: { fileName: _jsxFileName, lineNumber: 67 }, __self: this }, minions + neutralMinions, ' cs'),
                    _react2.default.createElement('p', { __source: { fileName: _jsxFileName, lineNumber: 68 }, __self: this }, matchOutcome))));


    }}exports.MatchInfoCard = MatchInfoCard;


const mapStateToProps = state => ({
    champions: state.playerReducer.playerChampInfo });exports.default =


(0, _reactRedux.connect)(mapStateToProps)(MatchInfoCard);